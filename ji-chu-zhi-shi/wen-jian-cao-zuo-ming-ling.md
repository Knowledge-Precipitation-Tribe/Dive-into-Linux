# 文件操作命令

## 文件标识符含义

![&#x6765;&#x6E90;&#xFF1A;https://blog.csdn.net/zhuoya\_/article/details/77418413](../.gitbook/assets/image%20%2813%29.png)

Linux中以`.`开头的文件为隐藏文件

## 拷贝文件或目录

```text
cp [选项] [原文件或目录] [目标目录]
```

选项中：

* -r复制目录
* -p连带文件属性一起复制
* -d若原文件是链接文件则复制链接属性
* -a相当于-pdr

## 移动文件或目录

```text
mv [选项] [源文件或目录] [目标目录]
```

选项中：

* **-b**: 当目标文件或目录存在时，在执行覆盖前，会为其创建一个备份。
* **-i**: 如果指定移动的源目录或文件与目标的目录或文件同名，则会先询问是否覆盖旧文件，输入 y 表示直接覆盖，输入 n 表示取消该操作。
* **-f**: 如果指定移动的源目录或文件与目标的目录或文件同名，不会询问，直接覆盖旧文件。
* **-n**: 不要覆盖任何已存在的文件或目录。
* **-u**：当源文件比目标文件新或者目标文件不存在时，才执行移动操作。

通过mv命令还可以实现重命名操作。

## 删除文件

```text
rm [-rf] [文件名/目录名]
```

其中：

* -r代表删除目录
* -f代表强制删除

## 常用文件处理命令

### grep

grep \(global search regular expression\(RE\) and print out the lin）,全面搜索正则表达式并把行打印出来\)是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。常用来在结果中搜索特定的内容。

### awk

awk 是一个强大的文本分析工具，相对于 grep 的查找，sed 的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件\(或其他方式的输入流, 如重定向输入\)逐行的读入（看作一个记录集）, 把每一行看作一条记录，以空格\(或\t,或用户自己指定的分隔符\)为默认分隔符，将每行切片（类似字段）切开的部分再进行各种分析处理。

### sed

sed更侧重对搜索文本的处理，如修改、删除、替换等等。sed主要用来自动编辑一个或多个文件，简化对文件的反复操作，编写转换程序等。

## 软连接

为了省下存储空间，都会使用链接的方式来对资源进行饮用，类似于在Windows系列中我们可以使用快捷方式，在mac和Linux中我们我们可以使用软链接的方式。可以对目录创建软连接，可以跨文件系统，可以对不存在的文件创建软连接。

软链接\(soft link\)：A是B的软链接（A 和 B 都是文件名），A 的目录项中的inode节点号与 B 的目录项中的 inode节点号不相同，A 和 B 指向的是两个不同的 inode，继而指向两块不同的数据块。但是 A 的数据块中存放的只是 B 的路径名，可以根据这个找到B 的目录项。A 和 B 之间是“主从”关系，如果 B 被删除了，A 仍然存在，因为两个是不同的文件，但指向的是一个无效的连接。

### 创建软链接

命令格式

```bash
ln  -s  [源文件或目录]  [目标文件或目录]
```

例如：

当前路径创建test 引向/var/www/test 文件夹 

```bash
ln –s  /var/www/test  test
```

创建/var/test 引向/var/www/test 文件夹 

```bash
ln –s  /var/www/test   /var/test 
```

### 删除软链接

和删除普通的文件是一眼的，删除都是使用rm来进行操作

```bash
rm –rf 软链接名称
```

例如：

删除test

```bash
rm –rf test
```

### 修改软链接

```bash
ln –snf  [新的源文件或目录]  [目标文件或目录]
```

这将会修改原有的链接地址为新的地址

例如：

创建一个软链接

```bash
ln –s  /var/www/test   /var/test
```

修改指向的新路径

```bash
ln –snf  /var/www/test1   /var/test
```

## 硬链接

{% embed url="https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/" %}

硬连接是透过文件系统的inode来产生新档名，而不是产生新档案。不能对目录创建硬连接，不能对不同的文件系统创建硬连接，不能对不存在文件创建硬连接。

硬连接\(hard link\)：A 是 B 的硬连接（A 和 B 都是文件名），则 A 的目录项中的inode节点号与 B 的目录项中的inode节点号相同，即一个inode节点对应两个不同的文件名，两个文件名指向同一个文件。A 和 B 对文件系统来说是完全平等的。如果删除了其中一个，对另外一个没有影响。每增加一个文件名，inode 节点上的连接数增加一，每删除一个对应的文件名，inode 节点上的连接数减一，直到为0，inode节点和对应的数据块被回收。

因为链接文件包含有原文件的路径信息，所以当原文件从一个目录下移到其他目录中，再访问链接文件，系统就找不到了，而硬链接就没有这个缺陷，你想怎么移就怎么移，因为它有系统分配而外的空间用于建立新的索引节点和保存原文件的路径。

_注：文件和文件名是不同的东西，rm A 删除的只是 A 这个文件名，而 A 对应的数据块（文件）只有在 inode 节点搀连接接数减少为 0 的时候才会被系统回收。_

### 创建硬连接

```bash
ln source target
```



